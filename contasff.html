<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador de Conting√™ncia</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #121212; color: #fff; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        h2 { text-align: center; margin-bottom: 20px; }
        
        .input-group { display: flex; gap: 10px; margin-bottom: 20px; }
        input { flex: 1; padding: 10px; border-radius: 5px; border: none; outline: none; }
        button#addBtn { padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;}
        button#addBtn:hover { background-color: #0056b3; }

        .account-card { background-color: #1e1e1e; padding: 15px; margin-bottom: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.5); }
        .account-info { display: flex; flex-direction: column; }
        .account-name { font-size: 1.1em; font-weight: bold; margin-bottom: 5px; }
        
        .status-badge { padding: 5px 10px; border-radius: 4px; font-size: 0.9em; font-weight: bold; width: fit-content; cursor: pointer; text-align: center; min-width: 80px;}
        
        .on { background-color: #28a745; color: white; }
        .off { background-color: #dc3545; color: white; }
        
        .timer { font-family: monospace; font-size: 0.9em; color: #ff6b6b; margin-top: 5px; }
        .actions { display: flex; align-items: center; gap: 10px; }
        .delete-btn { background: none; border: none; color: #666; cursor: pointer; font-size: 1.2em; }
        .delete-btn:hover { color: #fff; }
    </style>
</head>
<body>

<div class="container">
    <h2>üõ°Ô∏è Gerenciador de Contas</h2>
    
    <div class="input-group">
        <input type="text" id="accountName" placeholder="Nome da Conta (ex: Perfil 01 - Nicho Black)">
        <button id="addBtn" onclick="addAccount()">Adicionar</button>
    </div>

    <div id="accountsList">
        </div>
</div>

<script>
    // Carrega contas salvas ou inicia lista vazia
    let accounts = JSON.parse(localStorage.getItem('myAccounts')) || [];

    function saveAccounts() {
        localStorage.setItem('myAccounts', JSON.stringify(accounts));
        render();
    }

    function addAccount() {
        const nameInput = document.getElementById('accountName');
        const name = nameInput.value.trim();
        if (!name) return alert("Digite um nome para a conta!");

        accounts.push({
            id: Date.now(),
            name: name,
            isBlack: false, // Come√ßa como ON (n√£o est√° na black)
            blackSince: null
        });
        
        nameInput.value = '';
        saveAccounts();
    }

    function toggleStatus(id) {
        const acc = accounts.find(a => a.id === id);
        if (acc) {
            acc.isBlack = !acc.isBlack;
            // Se virou Black agora, define a data de in√≠cio
            if (acc.isBlack) {
                acc.blackSince = Date.now(); 
            } else {
                acc.blackSince = null;
            }
            saveAccounts();
        }
    }

    function deleteAccount(id) {
        if(confirm("Tem certeza que deseja excluir esta conta?")) {
            accounts = accounts.filter(a => a.id !== id);
            saveAccounts();
        }
    }

    function formatTimeLeft(startTime) {
        const now = Date.now();
        const duration = 7 * 24 * 60 * 60 * 1000; // 7 dias em milissegundos
        const endTime = startTime + duration;
        const diff = endTime - now;

        if (diff <= 0) return "Liberada! Volte para ON";

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);

        return `${days}d, ${hours}h, ${minutes}m, ${seconds}s`;
    }

    function render() {
        const list = document.getElementById('accountsList');
        list.innerHTML = '';

        accounts.forEach(acc => {
            let statusHtml = '';
            
            if (!acc.isBlack) {
                // Estado ON (Verde)
                statusHtml = `
                    <div class="actions">
                        <div class="status-badge on" onclick="toggleStatus(${acc.id})">ON</div>
                        <button class="delete-btn" onclick="deleteAccount(${acc.id})">&times;</button>
                    </div>`;
            } else {
                // Estado OFF (Vermelho com Timer)
                const timerText = formatTimeLeft(acc.blackSince);
                statusHtml = `
                    <div class="actions">
                        <div style="text-align:right">
                            <div class="status-badge off" onclick="toggleStatus(${acc.id})">OFF (Black)</div>
                            <div class="timer">${timerText}</div>
                        </div>
                        <button class="delete-btn" onclick="deleteAccount(${acc.id})">&times;</button>
                    </div>`;
            }

            const card = document.createElement('div');
            card.className = 'account-card';
            card.innerHTML = `
                <div class="account-info">
                    <span class="account-name">${acc.name}</span>
                </div>
                ${statusHtml}
            `;
            list.appendChild(card);
        });
    }

    // Atualiza o timer a cada 1 segundo
    setInterval(render, 1000);
    
    // Renderiza ao abrir
    render();
</script>

</body>
</html>
